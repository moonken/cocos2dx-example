window.__require=function t(e,o,r){function n(c,a){if(!o[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}}var u=o[c]={exports:{}};e[c][0].call(u.exports,function(t){return n(e[c][1][t]||t)},u,u.exports,t,e,o,r)}return o[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<r.length;c++)n(r[c]);return n}({achievementItem:[function(t,e,o){"use strict";cc._RF.push(e,"e462fc6r8NAQZ8dqYXLfLSu","achievementItem");t("global");cc.Class({extends:cc.Component,properties:{sprite:{default:null,type:cc.Node}},updateAchievement:function(t){var e=this;this.achievementItem=t,cc.loader.loadRes(t.image,cc.SpriteFrame,function(t,o){e.sprite.getComponent(cc.Sprite).spriteFrame=o})},start:function(){}}),cc._RF.pop()},{global:"global"}],backpack:[function(t,e,o){"use strict";cc._RF.push(e,"a79d2WLXetI3IVtFnmsUDsP","backpack");var r=t("global");cc.Class({extends:cc.Component,properties:{backpackItemList:{default:null,type:cc.Node},backpackItemPrefab:{default:null,type:cc.Prefab},itemSprite:{default:null,type:cc.Node}},onBack:function(){r.router.goBack()},onInfo:function(){r.router.goto(r.SCENES.PROFILE_SCENE)},selectItem:function(t){this.selectedItem=t;var e=this;cc.loader.loadRes(t.image,cc.SpriteFrame,function(t,o){e.itemSprite.getComponent(cc.Sprite).spriteFrame=o})},onLoad:function(){var t=this,e=r.backpack.getItems();this.backpackItemList.height=100*Math.ceil(e.length/3),e.forEach(function(e){var o=new cc.instantiate(t.backpackItemPrefab);o.getComponent("storeItem").store=t,o.getComponent("storeItem").updateItem(e),t.backpackItemList.addChild(o)})},start:function(){}}),cc._RF.pop()},{global:"global"}],character:[function(t,e,o){"use strict";cc._RF.push(e,"a072bMvv7ZD+qtIdi1oLlDg","character");var r=t("global");cc.Class({extends:cc.Component,properties:{nameEditor:{default:null,type:cc.EditBox},ageEditor:{default:null,type:cc.EditBox},heroSelectorPrefab:{default:null,type:cc.Prefab}},onGenderSelected:function(t){this.gender=t.checkEvents[0].customEventData},onNext:function(){r.profile.update({gender:this.gender,name:this.nameEditor.string,age:this.ageEditor.string,hero:this.heroSelector.getComponent("heroSelector").getSelectedHero().id}),r.router.goto(r.SCENES.WORLD_SCENE)},onLoad:function(){this.gender="Male",this.heroSelector=cc.instantiate(this.heroSelectorPrefab),this.node.addChild(this.heroSelector)},start:function(){}}),cc._RF.pop()},{global:"global"}],cityItem:[function(t,e,o){"use strict";cc._RF.push(e,"fb955GYWtVDfb3ai41cHKO+","cityItem");var r=t("global");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},updateCity:function(t){this.city=t,this.label.string=t.cityName},onClick:function(){r.setCurrentCity(this.city),r.router.goto(r.SCENES.CITY_SCENE)},start:function(){}}),cc._RF.pop()},{global:"global"}],cityScene:[function(t,e,o){"use strict";cc._RF.push(e,"ec7cdonEZ1MV7I9kB3daXlo","cityScene");var r=t("global");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},onLoad:function(){this.label.string=r.getCurrentCity().cityName},start:function(){},onBack:function(){r.router.goto(r.SCENES.WORLD_SCENE)},onQuizClicked:function(){r.router.goto(r.SCENES.QUIZ_SCENE)},onExplorationClicked:function(){r.router.goto(r.SCENES.EXPLORATION_SCENE)},onStoreClicked:function(){r.router.goto(r.SCENES.STORE_SCENE)}}),cc._RF.pop()},{global:"global"}],explorationGameEnd:[function(t,e,o){"use strict";cc._RF.push(e,"60114p+6hBIKYrIzCHLb4rq","explorationGameEnd");var r=t("global");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},onBack:function(){r.router.goto(r.SCENES.EXPLORATION_SCENE)},onLoad:function(){this.label.string=r.getCurrentExploration().id+" Game End"},start:function(){}}),cc._RF.pop()},{global:"global"}],explorationGame:[function(t,e,o){"use strict";cc._RF.push(e,"0027fG9o6pBM5mrrH8BWZeJ","explorationGame");var r=t("global");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},onEnd:function(){r.passCurrentExploration(),r.router.goto(r.SCENES.EXPLORATION_GAME_END_SCENE)},onLoad:function(){this.label.string=r.getCurrentExploration().id+" Game"},start:function(){}}),cc._RF.pop()},{global:"global"}],explorationItem:[function(t,e,o){"use strict";cc._RF.push(e,"07a45yM2qdE1Lmk/YYaXlnZ","explorationItem");var r=t("global");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},updateExploration:function(t){this.exploration=t,this.label.string=t.id,t.passed&&(this.node.color=new cc.Color(80,80,80))},onClick:function(){r.setCurrentExploration(this.exploration),r.router.goto(r.SCENES.EXPLORATION_GAME_SCENE)},start:function(){}}),cc._RF.pop()},{global:"global"}],explorationScene:[function(t,e,o){"use strict";cc._RF.push(e,"aefebm3SX1L8qmkKYkCruSU","explorationScene");var r=t("global");cc.Class({extends:cc.Component,properties:{explorationList:{default:null,type:cc.Node},explorationPrefab:{default:null,type:cc.Prefab}},onLoad:function(){var t=this,e=r.getCurrentExplorationList();this.explorationList.height=100*Math.ceil(e.length/6),e.forEach(function(e){var o=new cc.instantiate(t.explorationPrefab);o.getComponent("explorationItem").updateExploration(e),t.explorationList.addChild(o)})},start:function(){},onBackClicked:function(){r.router.goto(r.SCENES.CITY_SCENE)}}),cc._RF.pop()},{global:"global"}],global:[function(t,e,o){"use strict";cc._RF.push(e,"cf139KU5VhKOYftsDiSwiRb","global");var r=t("router"),n=t("userProfile"),i=Array.from(Array(12).keys()).map(function(t){return{id:"Q"+(t+1),question:"this is question'"+(t+1)}}),c=Array.from(Array(3).keys()).map(function(t){return{id:"Hero"+(t+1),image:"hero0"+(t%3+1)+".png"}}),a=Array.from(Array(12).keys()).map(function(t){return{id:"E"+(t+1),description:"this is exploration'"+(t+1)}}),s=Array.from(Array(12).keys()).map(function(t){return{id:"S"+(t+1),image:"MS0"+(t%4+1)+".png"}}),l=[{cityName:"\u5317\u4eac",quizs:i,explorations:a,storeItems:s},{cityName:"\u6b66\u6c49",quizs:i,explorations:a,storeItems:s},{cityName:"\u4e0a\u6d77",quizs:i,explorations:a,storeItems:s}],u=[],p=void 0,f=void 0,d={currentCity:{},currentQuiz:{},currentQuizList:[],currentExploration:{},currentExplorations:[]};e.exports={setPlayGround:function(t){p=t},getPlayGround:function(){return p},getCurrentCity:function(){if(!d.currentCity){var t=cc.sys.localStorage.getItem("cityName");d.currentCity=t&&this.cityList.find(function(e){return e.cityName===t})}return d.currentCity},setCurrentCity:function(t){d.currentCity=t,d.currentQuizList=t.quizs.slice(),d.currentExplorations=t.explorations.slice(),cc.sys.localStorage.setItem("cityName",t.cityName),cc.sys.localStorage.setItem("quizs",JSON.stringify(d.currentQuizList)),cc.sys.localStorage.setItem("explorations",JSON.stringify(d.currentExplorations))},getCurrentQuizList:function(){if(!d.currentQuizList){var t=cc.sys.localStorage.getItem("quizs");d.currentQuizList=t&&JSON.parse(t)}return d.currentQuizList||[]},getCurrentQuiz:function(){if(!d.currentQuiz){var t=cc.sys.localStorage.getItem("quizId");d.currentQuiz=t&&this.getCurrentQuizList().find(function(e){return e.id===t})}return d.currentQuiz},passCurrentQuiz:function(){this.getCurrentQuiz().passed=!0},passCurrentExploration:function(){this.getCurrentExploration().passed=!0},setCurrentQuiz:function(t){d.currentQuiz=t,cc.sys.localStorage.setItem("quizId",t.id)},setCurrentExploration:function(t){d.currentExploration=t,cc.sys.localStorage.setItem("explorationId",t.id)},getCurrentExplorationList:function(){if(!d.currentExplorationList){var t=cc.sys.localStorage.getItem("explorations");d.currentExplorationList=t&&JSON.parse(t)}return d.currentExplorationList||[]},getCurrentExploration:function(){if(!d.currentExploration){var t=cc.sys.localStorage.getItem("explorationId");d.currentExploration=ExplorationId&&this.getCurrentExplorationList().find(function(e){return e.id===t})}return d.currentExploration},backpack:{add:function(t){u.push(t)},getItems:function(){return u}},login:function(t,e){var o=t&&t.startsWith("user");return o&&(f=t),o},isFirstTimeUser:function(){return"user1"===f},getHeroImage:function(t){return c.find(function(e){return e.id===t}).image},profile:n,router:r,SCENES:r.SCENES,heros:c,cityList:l},cc._RF.pop()},{router:"router",userProfile:"userProfile"}],heroSelector:[function(t,e,o){"use strict";cc._RF.push(e,"95014odKmhD/rznt1qER7iQ","heroSelector");var r=t("global");cc.Class({extends:cc.Component,properties:{heroSprite:{default:null,type:cc.Node}},showNext:function(){this.heroListIndex++,this.loadHero()},showPre:function(){this.heroListIndex--,this.loadHero()},getSelectedHero:function(){return this.heroList[Math.abs(this.heroListIndex%this.heroList.length)]},loadHero:function(){var t=this.heroList[Math.abs(this.heroListIndex%this.heroList.length)].image,e=this;cc.loader.loadRes(t,cc.SpriteFrame,function(t,o){e.heroSprite.getComponent(cc.Sprite).spriteFrame=o})},onLoad:function(){this.heroList=r.heros,this.heroListIndex=0},start:function(){}}),cc._RF.pop()},{global:"global"}],login:[function(t,e,o){"use strict";cc._RF.push(e,"949daWWxOlEwak8YPvQ28p5","login");var r=t("global");cc.Class({extends:cc.Component,properties:{userNameEditor:{default:null,type:cc.EditBox},passwordEditor:{default:null,type:cc.EditBox},messageBox:{default:null,type:cc.Label}},onLogin:function(){this.messageBox.string="";var t=this.userNameEditor.string,e=this.passwordEditor.string;r.login(t,e)?(r.getPlayGround().loadProfileNode(),r.isFirstTimeUser()?r.router.goto(r.SCENES.CHARACTER_SCENE):r.router.goto(r.SCENES.WORLD_SCENE)):this.messageBox.string="\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef"},start:function(){}}),cc._RF.pop()},{global:"global"}],main:[function(t,e,o){"use strict";cc._RF.push(e,"bd1f4kMrPxJSYX3HawsL/5o","main");var r=t("global");cc.Class({extends:cc.Component,properties:{},onLoad:function(){r.router.goto(r.SCENES.START_SCENE)},start:function(){}}),cc._RF.pop()},{global:"global"}],playGround:[function(t,e,o){"use strict";cc._RF.push(e,"5c2bblznZ5HzbLlOC5avWbO","playGround");var r=t("global");cc.Class({extends:cc.Component,properties:{profilePrefab:{default:null,type:cc.Prefab},friendsPrefab:{default:null,type:cc.Prefab}},onLoad:function(){r.setPlayGround(this.node.getComponent("playGround")),cc.game.addPersistRootNode(this.node),this.node.zIndex=-999},loadProfileNode:function(){var t=cc.instantiate(this.profilePrefab);this.node.addChild(t);var e=cc.instantiate(this.friendsPrefab);this.node.addChild(e)},start:function(){}}),cc._RF.pop()},{global:"global"}],profileNode:[function(t,e,o){"use strict";cc._RF.push(e,"c30d8urJ5FMI64rmhwt+7Ii","profileNode");var r=t("global");cc.Class({extends:cc.Component,properties:{},gotoBackpack:function(){r.router.goto(r.SCENES.BACKPACK_SCENE)},gotoProfile:function(){r.router.goto(r.SCENES.PROFILE_SCENE)},start:function(){}}),cc._RF.pop()},{global:"global"}],profile:[function(t,e,o){"use strict";cc._RF.push(e,"5b183EnimhMFbM4TZu0iWHW","profile");var r=t("global");cc.Class({extends:cc.Component,properties:{achievementItemList:{default:null,type:cc.Node},achievementItemPrefab:{default:null,type:cc.Prefab},heroSprite:{default:null,type:cc.Node}},onBack:function(){r.router.goBack()},onLoad:function(){var t=this,e=r.profile.getAchievements();this.achievementItemList.height=100*Math.ceil(e.length/3),e.forEach(function(e){var o=new cc.instantiate(t.achievementItemPrefab);o.getComponent("achievementItem").updateAchievement(e),t.achievementItemList.addChild(o)});var o=r.profile.getCharacter().hero,n=r.getHeroImage(o),i=this;cc.loader.loadRes(n,cc.SpriteFrame,function(t,e){i.heroSprite.getComponent(cc.Sprite).spriteFrame=e})},start:function(){}}),cc._RF.pop()},{global:"global"}],quizGameEnd:[function(t,e,o){"use strict";cc._RF.push(e,"a618cIU+nxFuLt2XfXEkE9K","quizGameEnd");var r=t("global");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},onBack:function(){r.router.goto(r.SCENES.QUIZ_SCENE)},onLoad:function(){this.label.string=r.getCurrentQuiz().id+" Game End"},start:function(){}}),cc._RF.pop()},{global:"global"}],quizGame:[function(t,e,o){"use strict";cc._RF.push(e,"1860fCaVeBBfbxLIQeQ1aIi","quizGame");var r=t("global");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},onEnd:function(){r.passCurrentQuiz(),r.router.goto(r.SCENES.QUIZ_GAME_END_SCENE)},onLoad:function(){this.label.string=r.getCurrentQuiz().id+" Game"},start:function(){}}),cc._RF.pop()},{global:"global"}],quizItem:[function(t,e,o){"use strict";cc._RF.push(e,"5deb2fFnN1FE7jQoTxXBAMx","quizItem");var r=t("global");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},updateQuiz:function(t){this.quiz=t,this.label.string=t.id,t.passed&&(this.node.color=new cc.Color(80,80,80))},onClick:function(){r.setCurrentQuiz(this.quiz),r.router.goto(r.SCENES.QUIZ_GAME_SCENE)},start:function(){}}),cc._RF.pop()},{global:"global"}],quizScene:[function(t,e,o){"use strict";cc._RF.push(e,"fecdezPr1lH3qcyQbWr32nk","quizScene");var r=t("global");cc.Class({extends:cc.Component,properties:{quizList:{default:null,type:cc.Node},quizPrefab:{default:null,type:cc.Prefab}},onLoad:function(){var t=this,e=r.getCurrentQuizList();this.quizList.height=100*Math.ceil(e.length/6),e.forEach(function(e){var o=new cc.instantiate(t.quizPrefab);o.getComponent("quizItem").updateQuiz(e),t.quizList.addChild(o)})},start:function(){},onBackClicked:function(){r.router.goto(r.SCENES.CITY_SCENE)}}),cc._RF.pop()},{global:"global"}],router:[function(t,e,o){"use strict";cc._RF.push(e,"f51c9Y3M6VIEosIZY4H1zAi","router");var r=[];e.exports={SCENES:{MAIN_SCENE:"main.fire",PROFILE_SCENE:"profile.fire",LOGIN_SCENE:"login.fire",WORLD_SCENE:"world.fire",CHARACTER_SCENE:"character.fire",START_SCENE:"start.fire",STORE_SCENE:"world/city/store.fire",CITY_SCENE:"world/city.fire",QUIZ_SCENE:"world/city/quiz.fire",EXPLORATION_SCENE:"world/city/exploration.fire",BACKPACK_SCENE:"backpack.fire",QUIZ_GAME_SCENE:"world/city/quiz/quizGame.fire",QUIZ_GAME_END_SCENE:"world/city/quiz/quizGameEnd.fire",EXPLORATION_GAME_SCENE:"world/city/exploration/explorationGame.fire",EXPLORATION_GAME_END_SCENE:"world/city/exploration/explorationGameEnd.fire"},goto:function(t){cc.director.loadScene(t),r.push(t)},goBack:function(){r.splice(-1,1),cc.director.loadScene(r[r.length-1])}},cc._RF.pop()},{}],start:[function(t,e,o){"use strict";cc._RF.push(e,"280c3rsZJJKnZ9RqbALVwtK","start");var r=t("global");cc.Class({extends:cc.Component,properties:{},onStartBtnClicked:function(){r.router.goto(r.SCENES.LOGIN_SCENE)},onLoad:function(){},start:function(){},update:function(t){}}),cc._RF.pop()},{global:"global"}],storeItem:[function(t,e,o){"use strict";cc._RF.push(e,"19177u7rB5AMKD/K8zuPkye","storeItem");t("global");cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},updateItem:function(t){this.item=t,this.label.string=t.id},onClick:function(){this.store.selectItem(this.item)},start:function(){}}),cc._RF.pop()},{global:"global"}],storeScene:[function(t,e,o){"use strict";cc._RF.push(e,"6aa3dopaFtOO5CeTioq1OkK","storeScene");var r=t("global");cc.Class({extends:cc.Component,properties:{storeItemList:{default:null,type:cc.Node},storeItemPrefab:{default:null,type:cc.Prefab},itemSprite:{default:null,type:cc.Node}},onBack:function(){r.router.goto(r.SCENES.CITY_SCENE)},onBuy:function(){this.selectedItem&&r.backpack.add(this.selectedItem)},selectItem:function(t){this.selectedItem=t;var e=this;cc.loader.loadRes(t.image,cc.SpriteFrame,function(t,o){e.itemSprite.getComponent(cc.Sprite).spriteFrame=o})},gotoBackpack:function(){r.router.goto(r.SCENES.BACKPACK_SCENE)},onLoad:function(){var t=this,e=r.getCurrentCity().storeItems;this.storeItemList.height=100*Math.ceil(e.length/3),e.forEach(function(e){var o=new cc.instantiate(t.storeItemPrefab);o.getComponent("storeItem").store=t,o.getComponent("storeItem").updateItem(e),t.storeItemList.addChild(o)})},start:function(){}}),cc._RF.pop()},{global:"global"}],userProfile:[function(t,e,o){"use strict";cc._RF.push(e,"0932cON1j9KhJ82DzUCNH6q","userProfile");var r=null;e.exports={getAchievements:function(){return Array.from(Array(5).keys()).map(function(t){return{id:"A"+(t+1),image:"Arc0"+(t%2+1)+".png"}})},update:function(t){r=t,cc.sys.localStorage.setItem("character",JSON.stringify(t))},getCharacter:function(){return r||(r=JSON.parse(cc.sys.localStorage.getItem("character"))),r}},cc._RF.pop()},{}],world:[function(t,e,o){"use strict";cc._RF.push(e,"b33be6TwltJ37EmACrmWnZG","world");var r=t("global");cc.Class({extends:cc.Component,properties:{cityPrefab:{default:null,type:cc.Prefab},cityList:{default:null,type:cc.Node}},onLoad:function(){var t=this;r.cityList.forEach(function(e){var o=cc.instantiate(t.cityPrefab);o.getComponent("cityItem").updateCity(e),t.cityList.addChild(o)})},start:function(){}}),cc._RF.pop()},{global:"global"}]},{},["achievementItem","backpack","character","global","heroSelector","login","main","playGround","profile","profileNode","router","start","userProfile","world","explorationGame","explorationGameEnd","explorationItem","explorationScene","quizGame","quizGameEnd","quizItem","quizScene","storeItem","storeScene","cityItem","cityScene"]);